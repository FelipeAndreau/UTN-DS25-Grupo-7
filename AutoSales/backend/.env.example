# ================================
# CONFIGURACIÓN DE BASE DE DATOS DOCKER
# ================================

# URL de conexión a PostgreSQL - Supabase (Producción)
# DATABASE_URL: Session Pooler (para la aplicación) - Con SSL y parámetros de pooler
# DIRECT_DATABASE_URL: Conexión directa (para migraciones de Prisma) - Con SSL
DATABASE_URL="postgresql://postgres.fbhsysehqmgvlykzqaug:YOUR_PASSWORD@aws-1-sa-east-1.pooler.supabase.com:5432/postgres"
DIRECT_DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@db.fbhsysehqmgvlykzqaug.supabase.co:5432/postgres?sslmode=require"

# ---- CONFIGURACIÓN LEGACY SUPABASE (para desarrollo sin Docker) ----
# IPv6 (Casa/Redes modernas) - Usa Pooler Connection con SSL
DATABASE_URL_IPV6="postgresql://postgres.fbhsysehqmgvlykzqaug:YOUR_PASSWORD@aws-1-sa-east-1.pooler.supabase.com:5432/postgres?pgbouncer=true&sslmode=require&connection_limit=1"
DIRECT_URL_IPV6="postgresql://postgres:YOUR_PASSWORD@db.fbhsysehqmgvlykzqaug.supabase.co:5432/postgres?sslmode=require"

# IPv4 (Facultad/Redes más antiguas) - Conexión directa con SSL
DATABASE_URL_IPV4="postgresql://postgres:YOUR_PASSWORD@db.fbhsysehqmgvlykzqaug.supabase.co:5432/postgres?sslmode=require"
DIRECT_URL_IPV4="postgresql://postgres:YOUR_PASSWORD@db.fbhsysehqmgvlykzqaug.supabase.co:5432/postgres?sslmode=require"

# ================================
# CONFIGURACIÓN DE RED
# ================================
# auto: Detecta automáticamente (recomendado)
# ipv4: Fuerza conexión IPv4
# ipv6: Fuerza conexión IPv6
# docker: Configuración para contenedores
NETWORK_MODE=docker

# ================================
# CONFIGURACIÓN DEL SERVIDOR
# ================================
PORT=3000
HOST=0.0.0.0
NODE_ENV=production

# ================================
# CONFIGURACIÓN DE SEGURIDAD
# ================================
# Clave secreta para JWT (cambiar en producción)
JWT_SECRET=tu-jwt-secret-super-seguro-aqui-cambiar-en-produccion
JWT_EXPIRES_IN=7d

# ================================
# CONFIGURACIÓN DE CORS
# ================================
# URLs permitidas para CORS (separadas por comas)
CORS_ORIGIN=http://localhost:5173,http://localhost:3000,http://frontend

# ================================
# CONFIGURACIÓN DE PRISMA
# ================================
# Para evitar problemas con prepared statements en Docker
PRISMA_DISABLE_PREPARED_STATEMENTS=true

# ================================
# CONFIGURACIÓN DE DOCKER
# ================================
CONTAINER_NAME=autosales-backend
DOCKER_NETWORK=autosales-network

# ================================
# CONFIGURACIÓN DE LOGS
# ================================
LOG_LEVEL=info

# ================================
# CONFIGURACIÓN DE PRISMA
# ================================
PRISMA_CLI_QUERY_ENGINE_TYPE=binary
PRISMA_QUERY_ENGINE_LIBRARY=native
PRISMA_QUERY_ENGINE_BINARY=native
PRISMA_ENGINE_TYPE=binary
PRISMA_SKIP_POSTINSTALL_GENERATE=false
